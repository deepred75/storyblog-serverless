(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{498:function(t,e,n){var content=n(515);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(31).default)("1a54e29d",content,!0,{sourceMap:!1})},511:function(t,e,n){n(512)},512:function(t,e,n){"use strict";var o=n(10),r=n(34),l=n(13),c=n(141),f=n(18),d=n(70),m=n(142),h=n(285),x=n(11),v=n(47),w=x("replace"),T=RegExp.prototype,y=Math.max,I=function(t,e,n){return n>t.length?-1:""===e?n:t.indexOf(e,n)};o({target:"String",proto:!0},{replaceAll:function(t,e){var n,o,x,C,k,S,L,_,P=r(this),A=0,j=0,O="";if(null!=t){if((n=c(t))&&!~f(r("flags"in T?t.flags:m.call(t))).indexOf("g"))throw TypeError("`.replaceAll` does not allow non-global regexes");if(o=d(t,w))return o.call(t,P,e);if(v&&n)return f(P).replace(t,e)}for(x=f(P),C=f(t),(k=l(e))||(e=f(e)),S=C.length,L=y(1,S),A=I(x,C,0);-1!==A;)_=k?f(e(C,A,x)):h(C,x,A,[],void 0,e),O+=x.slice(j,A)+_,j=A+S,A=I(x,C,A+L);return j<x.length&&(O+=x.slice(j)),O}})},513:function(t,e,n){(function(e){var n="[object Symbol]",o=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,r=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,l="\\u2700-\\u27bf",c="a-z\\xdf-\\xf6\\xf8-\\xff",f="A-Z\\xc0-\\xd6\\xd8-\\xde",d="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",m="['’]",h="["+d+"]",x="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",v="\\d+",w="[\\u2700-\\u27bf]",T="["+c+"]",y="[^\\ud800-\\udfff"+d+v+l+c+f+"]",I="(?:\\ud83c[\\udde6-\\uddff]){2}",C="[\\ud800-\\udbff][\\udc00-\\udfff]",k="["+f+"]",S="(?:"+T+"|"+y+")",L="(?:"+k+"|"+y+")",_="(?:['’](?:d|ll|m|re|s|t|ve))?",P="(?:['’](?:D|LL|M|RE|S|T|VE))?",A="(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?",j="[\\ufe0e\\ufe0f]?",O=j+A+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",I,C].join("|")+")"+j+A+")*"),R="(?:"+[w,I,C].join("|")+")"+O,U=RegExp(m,"g"),$=RegExp(x,"g"),E=RegExp([k+"?"+T+"+"+_+"(?="+[h,k,"$"].join("|")+")",L+"+"+P+"(?="+[h,k+S,"$"].join("|")+")",k+"?"+S+"+"+_,k+"+"+P,v,R].join("|"),"g"),z=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,D="object"==typeof e&&e&&e.Object===Object&&e,F="object"==typeof self&&self&&self.Object===Object&&self,Z=D||F||Function("return this")();var object,Y=(object={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"ss"},function(t){return null==object?void 0:object[t]});var G=Object.prototype.toString,M=Z.Symbol,N=M?M.prototype:void 0,J=N?N.toString:void 0;function W(t){if("string"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&G.call(t)==n}(t))return J?J.call(t):"";var e=t+"";return"0"==e&&1/t==-Infinity?"-0":e}function B(t){return null==t?"":W(t)}var V,H=(V=function(t,e,n){return t+(n?"-":"")+e.toLowerCase()},function(t){return function(t,e,n,o){var r=-1,l=t?t.length:0;for(o&&l&&(n=t[++r]);++r<l;)n=e(n,t[r],r,t);return n}(function(t,pattern,e){return t=B(t),void 0===(pattern=e?void 0:pattern)?function(t){return z.test(t)}(t)?function(t){return t.match(E)||[]}(t):function(t){return t.match(o)||[]}(t):t.match(pattern)||[]}(function(t){return(t=B(t))&&t.replace(r,Y).replace($,"")}(t).replace(U,"")),V,"")});t.exports=H}).call(this,n(25))},514:function(t,e,n){"use strict";n(498)},515:function(t,e,n){var o=n(30)((function(i){return i[1]}));o.push([t.i,"/*purgecss start ignore*/\n#write-post .ql-editor{\n  border:1px solid #dcdfe6;\n  min-height:400px;\n  border-radius:4px;\n  padding:5px 15px;\n  font-size:16px\n}\n#write-post .ql-editor:hover{\n  border-color:#c0c4cc!important\n}\n#write-post .ql-editor:focus-within{\n  border-color:#409eff!important\n}\n#write-post .ql-editor.ql-blank:before{\n  font-size:14px;\n  color:#c0c4cc!important;\n  font-style:normal!important\n}\n\n/*purgecss end ignore*/",""]),o.locals={},t.exports=o},530:function(t,e,n){"use strict";n.r(e);var o=n(104),r=n(1),l=(n(28),n(88),n(511),n(59),n(56),n(17),n(39),n(40),n(495),n(280),n(44),n(107),n(513)),c=n.n(l),f={head:function(){return{title:"Write A Post"}},data:function(){return{postTitle:"",postSlug:null,postTitleLimit:70,descriptionLimit:300,timeout:null,checkingSlug:!1,available:!1,descriptionText:"",loading:!1,content:"",commentCount:0,postImageURL:null,postImageFile:null,tags:["tags"],tagLimit:1,published:!0}},methods:{onTitleChange:function(){var t=this;this.postSlug=c()(this.postTitle),this.checkingSlug=!0,this.timeout&&clearTimeout(this.timeout),this.postTitle.length<=this.postTitleLimit&&this.postSlug.length>0?this.timeout=setTimeout((function(){t.$store.dispatch("post/fetchPost",{uid:t.user.uid,slug:t.postSlug}).then((function(e){e.exists?t.available=!1:t.available=!0,t.checkingSlug=!1}))}),400):(this.available=!1,this.checkingSlug=!1)},resetFields:function(){this.postTitle="",this.descriptionText="",this.$refs.editor.quill.setContents(),this.tags=[],this.postImageURL=null,this.postImageFile=null},isContentValid:function(content){return 1!=content.ops.length||0!=content.ops[0].insert.replaceAll("\n","").length},openSubmitDialog:function(){var t=this;this.loading?this.$message.warning("Slow Down !!!"):this.$confirm("You won't have a chance to change the post's title or slug.","Warning",{confirmButtonText:"I understand",cancelButtonText:"Cancel",type:"warning",center:!0}).then(Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.submitPost();case 2:case"end":return e.stop()}}),e)})))).catch((function(){}))},submitPost:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var content,n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.loading=!0,content=t.$refs.editor.quill.getContents(),n=t.isContentValid(content),t.checkingSlug||!t.available){e.next=28;break}if(!(t.processedTags.length>0)){e.next=25;break}if(!(t.descriptionText.length<=t.descriptionLimit&&t.descriptionText.length>0)){e.next=22;break}if(!t.postImageFile){e.next=19;break}if(!n){e.next=16;break}return o={uid:t.user.uid,title:t.postTitle,slug:t.postSlug,likes:[],createdAt:Date.now(),updatedAt:Date.now(),description:t.descriptionText,content:content.ops,published:t.published,tags:t.processedTags,tagSlugs:t.processedTags.map((function(t){return t.slug}))},e.next=11,t.$store.dispatch("post/addPost",{postImageFile:t.postImageFile,postData:o});case 11:t.resetFields(),t.$message.success("Post succesfully added, redirecting..."),setTimeout((function(){t.$router.push("/".concat(t.user.username,"/").concat(o.slug))}),2e3),e.next=17;break;case 16:t.$message.error("Post content is not valid.");case 17:e.next=20;break;case 19:t.$message.error("You have to select a post image.");case 20:e.next=23;break;case 22:t.$message.error("Description text is not valid.");case 23:e.next=26;break;case 25:t.$message.error("Your have to define a tag.");case 26:e.next=29;break;case 28:t.$message.error("Post title/slug is not valid.");case 29:t.loading=!1;case 30:case"end":return e.stop()}}),e)})))()},test:function(t,e,a){console.log(t,e,a)},handlePostImageSuccess:function(t){var img=new Image;img.src=URL.createObjectURL(t.file);var e=this;img.onload=function(){this.width>1280||this.height>720?e.$message.error("Post image resolution cannot exceed 1280 x 720 pixel"):(e.postImageURL=this.src,e.postImageFile=t.file)}},beforePostImageUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type,n=t.size/1024/1024<2;return e?n||this.$message.error("Post image size cannot exceed 2 MB!"):this.$message.error("Post image must be JPG or PNG format!"),e&&n},removePostImage:function(){this.postImageURL=null,this.postImageFile=null}},computed:{user:function(){return this.$store.getters["user/getUser"]},processedTags:function(){return this.tags.map((function(t){return{slug:c()(t),name:t}})).reduce((function(t,e){return t.some((function(t){return t.slug==e.slug}))?t:[].concat(Object(o.a)(t),[{slug:e.slug,name:e.name}])}),[])}},watch:{postTitle:function(t){this.onTitleChange()},tags:function(t){t.length>this.tagLimit&&(this.$message.error("You can't add more tag."),t.splice(this.tagLimit,1))}}},d=(n(514),n(29)),component=Object(d.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"px-5 py-5"},[n("client-only",[n("el-form",{staticClass:"w-3/3 px-1 mx-auto my-0",attrs:{"label-position":"top"}},[n("h1",{staticClass:"font-semibold mb-4"},[t._v("Write Post")]),t._v(" "),n("el-form-item",{attrs:{label:"Post Title",required:""}},[n("el-input",{attrs:{type:"text",placeholder:"My awesome post title",autocomplete:"off",maxlength:t.postTitleLimit,"show-word-limit":"",clearable:""},model:{value:t.postTitle,callback:function(e){t.postTitle=e},expression:"postTitle"}})],1),t._v(" "),n("div",{staticClass:"text-sm -mt-2 mb-2"},[n("span",{staticClass:"font-semibold"},[t._v("Slug:")]),t._v(" "),n("span",{staticClass:"text-red-500",class:{"text-green-500":t.available}},[t._v('"'+t._s(t.postSlug)+'" is '+t._s(t.available?"available.":"not available for you. ")+" ")])]),t._v(" "),n("el-form-item",{attrs:{label:"Define a tag (max 1)",required:""}},[n("el-input-tag",{attrs:{size:"medium",type:"info"},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Description Text",required:""}},[n("el-input",{attrs:{type:"textarea",placeholder:"A short, interesting summary of your post.",autosize:{minRows:6},autocomplete:"off",maxlength:t.descriptionLimit,"show-word-limit":""},model:{value:t.descriptionText,callback:function(e){t.descriptionText=e},expression:"descriptionText"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Post Image",required:""}},[n("el-upload",{staticClass:"post-image-uploader",attrs:{action:"","show-file-list":!1,"http-request":t.handlePostImageSuccess,"before-upload":t.beforePostImageUpload}},[t.postImageURL?n("div",{staticClass:"w-full h-80 rounded-lg shadow-lg overflow-hidden"},[n("div",{staticClass:"postImageAnimation w-full h-full bg-cover",style:"background-image: url("+t.postImageURL+")"})]):n("div",{staticClass:" post-image-uploader-icon"},[n("span",{staticClass:"isax-add"})])]),t._v(" "),t.postImageFile?n("div",{staticClass:"text-red-500 space-x-2 cursor-pointer select-none flex items-center w-max",on:{click:t.removePostImage}},[n("span",{staticClass:"isax-trash text-lg"}),t._v(" "),n("span",[t._v("Remove Image")])]):t._e()],1),t._v(" "),n("el-form-item",{staticStyle:{"margin-bottom":"0!important"},attrs:{label:"Post Content",required:""}}),t._v(" "),n("div",{staticClass:"mb-4",attrs:{id:"write-post"}},[n("quill-editor",{ref:"editor",model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1),t._v(" "),n("el-form-item",{staticClass:"flex space-x-2 items-center",attrs:{label:"Published"}},[n("el-switch",{attrs:{"active-color":"#13ce66"},model:{value:t.published,callback:function(e){t.published=e},expression:"published"}})],1),t._v(" "),n("div",{staticClass:"flex items-center space-x-2"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.openSubmitDialog()}}},[t._v("Submit Post")]),t._v(" "),t.loading?n("Loading",{staticClass:"text-xl"}):t._e()],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Loading:n(276).default})}}]);