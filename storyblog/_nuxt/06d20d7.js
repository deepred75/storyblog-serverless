(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{500:function(e,t,n){var content=n(522);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(31).default)("1b21f1a2",content,!0,{sourceMap:!1})},501:function(e,t,n){"use strict";n.r(t);var o=n(1),r=(n(28),{data:function(){return{comments:null}},props:{parent:String,postOwnerId:String,post:Object},fetch:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("comment/fetchComments",{postOwnerId:e.postOwnerId,slug:e.$route.params.postSlug,parent:e.parent});case 2:n=t.sent,e.comments=n;case 4:case"end":return t.stop()}}),t)})))()}}),c=n(29),component=Object(c.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment"},e._l(e.comments,(function(t){return n("div",{key:t.commentId},[n("CommentInside",{attrs:{comment:t,postOwnerId:e.postOwnerId,post:e.post}})],1)})),0)}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{CommentInside:n(523).default})},521:function(e,t,n){"use strict";n(500)},522:function(e,t,n){var o=n(30)((function(i){return i[1]}));o.push([e.i,"/*purgecss start ignore*/\n.comment-container:hover>.comment>.commentLine span[data-v-467ed9bd],.reply:hover>.replyLine span[data-v-467ed9bd]{\n  background-color:#409eff;\n  opacity:1\n}\n.commentLine[data-v-467ed9bd], .replyLine[data-v-467ed9bd]{\n  display:flex;\n  height:auto;\n  width:2rem;\n  justify-content:center\n}\n.commentLine span[data-v-467ed9bd],.replyLine span[data-v-467ed9bd]{\n  display:block;\n  width:2px;\n  height:100%;\n  transition:background-color .4s,opacity .4s;\n  background-color:#ccc\n}\n.commentLine[data-v-467ed9bd]{\n  padding-top:0.5rem\n}\n\n/*purgecss end ignore*/",""]),o.locals={},e.exports=o},523:function(e,t,n){"use strict";n.r(t);n(42),n(23),n(38),n(54),n(24),n(55);var o=n(19),r=n(1);n(106),n(53),n(68),n(28);function c(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function m(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var d=n(520),l={data:function(){return{commentOwner:null,anonymousComment:{photoURL:null,displayName:"Anonymous",username:"anonymous"},showReply:!1,replyContent:"",replyLimit:300,replyLoading:!1,showReplies:!1,forceUpdate:0,voteLoading:!1,timeOptions:{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"},showEditArea:!1,editLoading:!1,deleteLoading:!1,updateHistory:!1}},methods:{getTime:function(time){return new Date(time).toLocaleDateString("id-ID",this.timeOptions)},toggleHistory:function(){this.authUser?this.updateHistory=!0:this.$message.error("You have to login to see a comment's history.")},highlightDifferences:function(e,t){var n=d.diffCss(t,e);return d.convertChangesToXML(n)},handleMoreOption:function(e){"editComment"==e&&(this.showEditArea=!this.showEditArea),"deleteComment"==e&&this.openDeleteModal()},openDeleteModal:function(){var e=this;this.$confirm("Are you sure you want to delete your comment.","Warning",{confirmButtonText:"Delete",cancelButtonText:"Cancel",type:"warning",center:!0}).then((function(){e.confirmDelete().then((function(){e.$message.success("Your comment successfully deleted.")}))})).catch((function(){}))},confirmDelete:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.deleteCommentWarning=!1,e.deleteLoading){t.next=18;break}if(e.deleteLoading=!0,n={commentId:e.comment.commentId,postOwnerId:e.postOwnerId,slug:e.post.slug},0==e.comment.replyCount){t.next=12;break}return t.next=7,e.$store.dispatch("comment/deleteCommentTemporarily",n);case 7:e.comment.uid="deleted",e.comment.content="Message deleted.",e.commentOwner=e.anonymousComment,t.next=17;break;case 12:return t.next=14,e.$store.dispatch("comment/deleteCommentAbsolute",m({parentId:e.comment.parentId},n));case 14:e.post.slug!=e.comment.parentId&&(e.$parent.$parent.comment.replyCount-=1,0==e.$parent.$parent.comment.replyCount&&"deleted"==e.$parent.$parent.comment.uid&&e.$parent.$parent.confirmDelete()),e.commentOwner=!1,e.post.commentCount-=1;case 17:e.deleteLoading=!1;case 18:case"end":return t.stop()}}),t)})))()},applyEdit:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.editLoading){t.next=19;break}if(e.editLoading=!0,!(e.comment.content.length<=e.replyLimit)){t.next=15;break}if(!(e.comment.content.length>0)){t.next=12;break}return n={commentId:e.comment.commentId,postOwnerId:e.postOwnerId,slug:e.post.slug,newContent:e.comment.content,updatedAt:Date.now()},t.next=7,e.$store.dispatch("comment/editComment",n);case 7:e.comment.updatedAt=n.updatedAt,e.comment.updateHistory.push({editedAt:n.updatedAt,content:n.newContent}),e.showEditArea=!1,t.next=13;break;case 12:e.$message.error("You should type something.");case 13:t.next=16;break;case 15:e.$message.error("You can't break the rules.");case 16:e.editLoading=!1,t.next=20;break;case 19:e.$message.warning("Slow Down !!!");case 20:case"end":return t.stop()}}),t)})))()},toggleReply:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.authUser?e.showReply=!e.showReply:e.$message.error("You have to login to reply a comment.");case 1:case"end":return t.stop()}}),t)})))()},upVote:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.authUser){t.next=22;break}if(e.voteLoading){t.next=19;break}if(e.voteLoading=!0,n={postOwnerId:e.postOwnerId,slug:e.post.slug,commentId:e.comment.commentId,authUserId:e.authUser.uid,inc:e.hasAlreadyDownVoted?2:1},e.hasAlreadyUpVoted){t.next=12;break}return t.next=7,e.$store.dispatch("comment/upVoteComment",n);case 7:e.comment.upVotes.push(e.authUser.uid),e.comment.voteCount+=e.hasAlreadyDownVoted?2:1,e.hasAlreadyDownVoted&&e.comment.downVotes.splice(e.comment.downVotes.indexOf(e.authUser.uid),1),t.next=16;break;case 12:return t.next=14,e.$store.dispatch("comment/resetUpVote",n);case 14:e.comment.upVotes.splice(e.comment.upVotes.indexOf(e.authUser.uid),1),e.comment.voteCount-=1;case 16:e.voteLoading=!1,t.next=20;break;case 19:e.$message.warning("Slow Down !!!");case 20:t.next=23;break;case 22:e.$message.error("You have to login to vote a comment.");case 23:case"end":return t.stop()}}),t)})))()},downVote:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.authUser){t.next=22;break}if(e.voteLoading){t.next=19;break}if(e.voteLoading=!0,n={postOwnerId:e.postOwnerId,slug:e.post.slug,commentId:e.comment.commentId,authUserId:e.authUser.uid,inc:e.hasAlreadyUpVoted?-2:-1},e.hasAlreadyDownVoted){t.next=12;break}return t.next=7,e.$store.dispatch("comment/downVoteComment",n);case 7:e.comment.downVotes.push(e.authUser.uid),e.comment.voteCount-=e.hasAlreadyUpVoted?2:1,e.hasAlreadyUpVoted&&e.comment.upVotes.splice(e.comment.upVotes.indexOf(e.authUser.uid),1),t.next=16;break;case 12:return t.next=14,e.$store.dispatch("comment/resetDownVote",n);case 14:e.comment.downVotes.splice(e.comment.downVotes.indexOf(e.authUser.uid),1),e.comment.voteCount+=1;case 16:e.voteLoading=!1,t.next=20;break;case 19:e.$message.warning("Slow Down !!!");case 20:t.next=23;break;case 22:e.$message.error("You have to login to vote a comment.");case 23:case"end":return t.stop()}}),t)})))()},replyComment:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.replyLoading){t.next=22;break}if(e.replyLoading=!0,!(e.replyContent.length<=e.replyLimit)){t.next=18;break}if(!(e.replyContent.length>0)){t.next=15;break}return n={uid:e.authUser.uid,parentId:e.comment.commentId,content:e.replyContent,updateHistory:[{editedAt:Date.now(),content:e.replyContent}],upVotes:[],downVotes:[],voteCount:0,replyCount:0,createdAt:Date.now(),updatedAt:Date.now()},t.next=7,e.$store.dispatch("comment/addComment",{postOwnerId:e.postOwnerId,slug:e.post.slug,commentData:n});case 7:e.replyContent="",e.showReply=!1,e.forceUpdate+=1,e.comment.replyCount+=1,e.post.commentCount+=1,e.showReplies=!0,t.next=16;break;case 15:e.$message.error("You should type something.");case 16:t.next=19;break;case 18:e.$message.error("You can't break the rules.");case 19:e.replyLoading=!1,t.next=23;break;case 22:e.$message.warning("Slow Down !!!");case 23:case"end":return t.stop()}}),t)})))()}},computed:{fromNow:function(){return function(time){return this.$moment(time).fromNow()}},authUser:function(){return this.$store.getters["user/getUser"]},hasAlreadyUpVoted:function(){var e=!1;return this.authUser&&(e=this.comment.upVotes.includes(this.authUser.uid)),e},hasAlreadyDownVoted:function(){var e=!1;return this.authUser&&(e=this.comment.downVotes.includes(this.authUser.uid)),e}},props:{comment:Object,postOwnerId:String,post:Object},fetch:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("deleted"==e.comment.uid){t.next=7;break}return t.next=3,e.$store.dispatch("user/fetchUser",e.comment.uid);case 3:n=t.sent,e.commentOwner=n.data(),t.next=8;break;case 7:e.commentOwner=e.anonymousComment;case 8:case"end":return t.stop()}}),t)})))()}},h=(n(521),n(29)),component=Object(h.a)(l,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.commentOwner?o("div",{staticClass:"comment-container flex flex-col"},[o("div",{staticClass:"flex items-center space-x-3 pt-2"},["deleted"!=e.comment.uid?o("NuxtLink",{staticClass:"w-8 h-8 rounded-md shadow overflow-hidden",attrs:{to:"/"+e.commentOwner.username}},[o("img",{attrs:{src:e.commentOwner.photoURL||n(276),alt:e.commentOwner.displayName}})]):e._e(),e._v(" "),o("div",{staticClass:"text-sm font-semibold"},["deleted"!=e.comment.uid?o("NuxtLink",{staticClass:"inline-block transition duration-300 transform hover:translate-x-1",attrs:{to:"/"+e.commentOwner.username}},[e._v(e._s(e.commentOwner.displayName))]):o("span",[e._v(e._s(e.commentOwner.displayName))])],1),e._v(" "),"deleted"!=e.comment.uid?o("div",{staticClass:"flex space-x-2 items-center text-xs text-gray-500"},[o("span",{attrs:{title:e.getTime(e.comment.createdAt)}},[e._v("sent "+e._s(e.fromNow(e.comment.createdAt)))]),e._v(" "),e.comment.createdAt!=e.comment.updatedAt?o("div",{staticClass:"p-0.5 bg-gray-400 rounded-full"}):e._e(),e._v(" "),e.comment.createdAt!=e.comment.updatedAt?o("span",{attrs:{title:e.getTime(e.comment.updatedAt)}},[o("span",{staticClass:"underline cursor-pointer select-none hover:text-gray-600",on:{click:function(t){return e.toggleHistory()}}},[e._v("edited")]),e._v("\n        "+e._s(e.fromNow(e.comment.updatedAt))+"\n      ")]):e._e()]):o("span",{staticClass:"text-xs text-gray-500"},[e._v("Unknown")]),e._v(" "),e.authUser&&e.authUser.uid==e.comment.uid?o("el-dropdown",{attrs:{size:"small",trigger:"click",placement:"bottom-start"},on:{command:e.handleMoreOption}},[o("span",{staticClass:"el-dropdown-link"},[o("span",{staticClass:"transition duration-300 hover:bg-gray-50 hover:shadow cursor-pointer p-1 rounded-full isax-more text-gray-500"})]),e._v(" "),o("el-dropdown-menu",{staticClass:"w-40",attrs:{slot:"dropdown"},slot:"dropdown"},[o("el-dropdown-item",{attrs:{command:"editComment"}},[o("div",{staticClass:"dd-item"},[o("span",{staticClass:"text-base",class:e.showEditArea?"isax-eye":"isax-edit"}),o("span",[e._v(e._s(e.showEditArea?"Preview":"Edit")+" comment")])])]),e._v(" "),o("el-dropdown-item",{attrs:{divided:"",command:"deleteComment"}},[o("div",{staticClass:"dd-item text-red-600"},[o("span",{staticClass:"text-base isax-trash"}),o("span",[e._v("Delete comment")])])])],1)],1):e._e()],1),e._v(" "),o("div",{staticClass:"comment flex"},[e._m(0),e._v(" "),o("div",{staticClass:"flex-1 overflow-hidden pl-2"},[e.showEditArea?o("div",{staticClass:"space-y-1 mb-2"},[o("el-input",{attrs:{type:"textarea",autosize:{minRows:2},maxlength:e.replyLimit,"show-word-limit":""},model:{value:e.comment.content,callback:function(t){e.$set(e.comment,"content",t)},expression:"comment.content"}}),e._v(" "),o("el-button",{attrs:{size:"small",type:"warning",round:""},on:{click:function(t){return e.applyEdit()}}},[e._v("Apply Update")])],1):o("p",{staticClass:"py-2 text-sm overflow-hidden overflow-ellipsis",class:{"text-xs line-through":"deleted"==e.comment.uid}},[e._v(e._s(e.comment.content))]),e._v(" "),o("div",{staticClass:"flex items-center space-x-1"},[o("div",{staticClass:"flex w-8 h-8 text-lg justify-center items-center cursor-pointer transition duration-300 rounded-full hover:bg-green-50 hover:text-green-700",class:{"bg-green-50 text-green-700":e.hasAlreadyUpVoted},on:{click:function(t){return e.upVote()}}},[o("span",{staticClass:"isax-arrow-up-2"})]),e._v(" "),o("span",{staticClass:"text-sm font-semibold text-gray-600 px-1"},[e._v(e._s(e.comment.voteCount))]),e._v(" "),o("div",{staticClass:"flex w-8 h-8 text-lg justify-center items-center cursor-pointer transition duration-300 rounded-full hover:bg-red-50 hover:text-red-700",class:{"bg-red-50 text-red-700":e.hasAlreadyDownVoted},on:{click:function(t){return e.downVote()}}},[o("span",{staticClass:"isax-arrow-down-1"})]),e._v(" "),"deleted"!=e.comment.uid?o("span",{staticClass:"select-none cursor-pointer text-sm font-semibold",on:{click:function(t){return e.toggleReply()}}},[e._v("Reply")]):e._e()]),e._v(" "),o("el-collapse-transition",[o("div",{directives:[{name:"show",rawName:"v-show",value:e.showReply,expression:"showReply"}],staticClass:"reply mt-2 flex"},[o("div",{staticClass:"replyLine pt-0"},[o("span")]),e._v(" "),o("div",{staticClass:"flex-1 pl-2 space-y-1"},[o("el-input",{attrs:{type:"textarea",placeholder:"What are your thoughts?.",autosize:{minRows:2},autocomplete:"off",maxlength:e.replyLimit,"show-word-limit":""},model:{value:e.replyContent,callback:function(t){e.replyContent=t},expression:"replyContent"}}),e._v(" "),o("el-button",{attrs:{size:"small",type:"primary",round:""},on:{click:function(t){return e.replyComment()}}},[e._v("Reply")])],1)])]),e._v(" "),e.comment.replyCount>0?o("span",{staticClass:"mt-2 text-yellow-600 hover:text-yellow-700 select-none cursor-pointer text-sm font-semibold",on:{click:function(t){e.showReplies=!e.showReplies}}},[e._v(e._s(e.showReplies?"Hide":"Show")+" Replies")]):e._e(),e._v(" "),o("el-collapse-transition",[o("Comments",{directives:[{name:"show",rawName:"v-show",value:e.showReplies,expression:"showReplies"}],key:e.forceUpdate,attrs:{parent:e.comment.commentId,postOwnerId:e.postOwnerId,post:e.post}})],1)],1)]),e._v(" "),o("el-drawer",{attrs:{title:"Update history for selected comment.",visible:e.updateHistory,direction:"rtl",size:"80%"},on:{"update:visible":function(t){e.updateHistory=t}}},[o("div",{staticClass:"px-8"},[o("div",{staticClass:"flex mb-8"},[o("NuxtLink",{staticClass:"w-24 h-24 rounded-lg shadow overflow-hidden",attrs:{to:"/"+e.commentOwner.username}},[o("img",{attrs:{src:e.commentOwner.photoURL||n(276),alt:e.commentOwner.displayName}})]),e._v(" "),o("div",{staticClass:"ml-4 flex flex-1 flex-col space-y-1 justify-center text-sm"},[o("NuxtLink",{staticClass:"transition duration-300 transform hover:translate-x-1",attrs:{to:"/"+e.commentOwner.username}},[o("h6",{staticClass:"font-semibold"},[e._v(e._s(e.commentOwner.displayName))])]),e._v(" "),e.commentOwner.location?o("div",{staticClass:"flex items-center"},[o("span",{staticClass:"mr-1 text-lg isax-location"}),e._v(e._s(e.commentOwner.location))]):e._e(),e._v(" "),e.commentOwner.profession?o("div",{staticClass:"flex items-center"},[o("span",{staticClass:"mr-1 text-lg isax-briefcase"}),e._v(e._s(e.commentOwner.profession))]):e._e(),e._v(" "),o("p",[e._v(e._s(e.commentOwner.bio))])],1)],1),e._v(" "),o("div",{staticClass:"updateHistory grid gap-x-10 grid-cols-2 w-full h-full"},e._l(e.comment.updateHistory,(function(t,n){return o("div",{key:t.editedAt,staticClass:"historyItem flex flex-col pb-10"},[o("h5",{staticClass:"font-semibold"},[e._v(e._s(n+1))]),e._v(" "),o("span",{staticClass:"text-xs text-gray-500"},[e._v(e._s(e.getTime(t.editedAt)))]),e._v(" "),o("hr",{staticClass:"my-2"}),e._v(" "),o("div",{staticClass:"text-sm diff-content",staticStyle:{"line-break":"anywhere"},domProps:{innerHTML:e._s(0!=n?e.highlightDifferences(t.content,e.comment.updateHistory[n-1].content):t.content)}}),e._v(" "),o("style",[e._v("\n              ins{\n                text-decoration: none;\n                color: #fff;\n                background-color: #10B981;\n              }\n              del {\n                color: #fff;\n                text-decoration: none;\n                background-color: #EF4444;\n              }\n          ")])])})),0)])])],1):e._e()}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"commentLine"},[t("span")])}],!1,null,"467ed9bd",null);t.default=component.exports;installComponents(component,{Comments:n(501).default})}}]);